<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>replit</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <style>
    #loading {
      display: none
    }

    #success {
      display: none;
      color: green;
    }
  </style>
</head>

<body class="container">
  <h1>Add Movie</h1>

  <form id="addMovie">

    <label for="title">Title:</label><br>
    <input type="text" id="title" /><br><br>

    <label for="releaseYear">Release Year:</label><br>
    <input type="text" id="releaseYear" /><br><br>

    <label for="selectGenre">Genre:</label><br>
    <select id="selectGenre">
      <option value="Action">Action</option>
      <option value="Drama">Drama</option>
      <option value="Comedy">Comedy</option>
    </select><br><br>

    <label for="director">Director:</label><br>
    <input type="text" id="director" /><br><br>

    <label for="actor">Actors:</label><br>
    <input type="text" id="actor" /><br><br>

    <label for="language">Language:</label><br>
    <input type="text" id="language" /><br><br>

    <label for="selectCountry">Country:</label><br>
    <select id="selectCountry">
      <option value="India">India</option>
      <option value="USA">USA</option>
      <option value="Japan">Japan</option>
    </select><br><br>

    <label for="rating">Rating:</label><br>
    <input type="text" id="rating" /><br><br>

    <label for="plotTextarea">Plot:</label><br>
    <textarea id="plotTextarea"></textarea><br><br>

    <label for="awards">Awards:</label><br>
    <input type="text" id="awards" /><br><br>

    <label for="postUrl">POST URL:</label><br>
    <input type="text" id="postUrl" /><br><br>

    <label for="trailerUrl">Trailer URL:</label><br>
    <input type="text" id="trailerUrl" /><br><br>

    <button class="btn btn-primary" type="submit">Add Movies</button>

  </form>

  <div id="loading">Saving Data...</div>
  <div id="success">Add successfully</div>

  <script>
    const title = document.querySelector('#title')
    const addMovie = document.querySelector('#addMovie')
    const releaseYear = document.querySelector('#releaseYear')
    const selectGenre = document.querySelector('#selectGenre')
    const director = document.querySelector('#director')
    const actor = document.querySelector('#actor')
    const language = document.querySelector('#language')
    const selectCountry = document.querySelector('#selectCountry')
    const rating = document.querySelector('#rating')
    const plotTextarea = document.querySelector('#plotTextarea')
    const awards = document.querySelector('#awards')
    const postUrl = document.querySelector('#postUrl')
    const trailerUrl = document.querySelector('#trailerUrl')
    const loadingContainer = document.querySelector("#loading")
    const successContainer = document.querySelector("#success")
    const API_URL = "https://va-5-assignment-express-student-neog.replit.app/movies"

    addMovie.addEventListener('submit', function (event) {
      event.preventDefault()
      loadingContainer.style.display = "block"

      const movieData = {
        title: title.value,
        releaseYear: releaseYear.value,
        genre: selectGenre.value,
        director: director.value,
        actor: actor.value,
        language: language.value,
        country: selectCountry.value,
        rating: rating.value,
        plot: plotTextarea.value,
        award: awards.value,
        posterUrl: postUrl.value,
        trailerUrl: trailerUrl.value
      }

      fetch(API_URL, {
        method: "POST",
        body: JSON.stringify(movieData),
        headers: {
          "content-type": "application/json"
        }
      })
        .then(function (response) {
          return response.json()
        })
        .then(function (data) {
          if (data) {
            loadingContainer.style.display = "none"
            successContainer.style.display = "block"
          }

        })
    })



  </script>




</body>

</html>